<!doctype html>

<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RHF Admin Control – CS</title>
<style>
body{margin:0;background:#0b0f14;color:#e5e7eb;font-family:Arial}
.panel{max-width:900px;margin:30px auto}
.card{background:#121826;border:1px solid #1f2937;border-radius:14px;padding:14px;margin-bottom:12px}
input,textarea,button{width:100%;padding:10px;border-radius:8px;border:none;margin:6px 0}
button{background:#3b82f6;color:#fff}
.ticket{border-bottom:1px dashed #1f2937;padding:8px 0}
small{color:#9ca3af}
</style>
</head>
<body><div class="panel">
  <h2>RHF ADMIN CONTROL – CUSTOMER SERVICE</h2>  <div class="card">
    <h4>Tiket Masuk (Realtime)</h4>
    <div id="tickets"></div>
  </div>
</div><script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAyHSaALeuwibcF22VNL_6WDlcZepcDB3A",
  authDomain: "rhf-gamestore.firebaseapp.com",
  databaseURL: "https://rhf-gamestore-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "rhf-gamestore",
  storageBucket: "rhf-gamestore.firebasestorage.app",
  messagingSenderId: "52065906934",
  appId: "1:52065906934:web:c15f0eff91cc937f787cd7"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// LOAD TICKET CS REALTIME
const tickets=document.getElementById('tickets');
onValue(ref(db,'support'), snap=>{
  tickets.innerHTML='';
  snap.forEach(c=>{
    const t=c.val();
    const d=document.createElement('div');
    d.className='ticket';
    d.innerHTML=`
      <b>${t.judul}</b><br>
      <small>User: ${t.user} | Status: ${t.status}</small>
      <p>${t.pesan}</p>
      <textarea id="r_${c.key}" placeholder="Balasan admin"></textarea><button onclick="reply('${c.key}')">Balas & Tandai Selesai</button>`;
tickets.appendChild(d);

}); });

window.reply = (id)=>{ const msg=document.getElementById('r_'+id).value; update(ref(db,'support/'+id),{ reply: msg, status: 'SELESAI' }); } </script>

</body>
</html>
