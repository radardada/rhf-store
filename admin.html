<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ADMIN PANEL RHF - FULL CONTROL</title>

<style>
body{margin:0;background:#020617;color:#fff;font-family:Arial}
h2{margin-top:0}
.box{
 background:#020617;
 border:1px solid #1e293b;
 border-radius:14px;
 padding:16px;
 margin-bottom:16px
}
input,textarea,button{
 width:100%;
 padding:10px;
 margin-top:8px;
 border-radius:8px;
 border:none
}
button{cursor:pointer;font-weight:bold}
.green{background:#22c55e;color:#000}
.red{background:#ef4444;color:#fff}
.gray{background:#334155;color:#fff}
.item{border-bottom:1px solid #1e293b;padding:10px 0}
small{color:#94a3b8}
</style>
</head>

<body>

<div style="padding:16px">
<h2>ADMIN PANEL RHF (MASTER CONTROL)</h2>

<!-- GLOBAL MESSAGE / EVENT -->
<div class="box">
<h3>ðŸ“¢ Kirim Pesan / Event Global</h3>
<textarea id="gtext" placeholder="Pesan global / diskon / event"></textarea>
<button class="green" onclick="sendGlobal()">KIRIM GLOBAL</button>
</div>

<!-- ITEM -->
<div class="box">
<h3>ðŸŽ® Item & Harga</h3>
<input id="game" placeholder="Nama Game">
<input id="name" placeholder="Nama Item">
<input id="price" placeholder="Harga (contoh 50000)">
<input id="img" placeholder="Link Gambar">
<button class="green" onclick="addItem()">SIMPAN ITEM</button>
<div id="items"></div>
</div>

<!-- VOUCHER -->
<div class="box">
<h3>ðŸŽŸ Voucher</h3>
<input id="vcode" placeholder="Kode Voucher">
<input id="vdisc" placeholder="Diskon %">
<input id="vmax" placeholder="Maks User">
<input id="vexp" placeholder="Expired (YYYY-MM-DD)">
<button class="green" onclick="addVoucher()">SIMPAN VOUCHER</button>
<div id="vouchers"></div>
</div>

<!-- USERS -->
<div class="box">
<h3>ðŸ‘¤ Buat Akun User</h3>
<input id="user" placeholder="Username">
<input id="pass" placeholder="Password">
<button class="green" onclick="addUser()">BUAT AKUN</button>
</div>

<div class="box">
<h3>ðŸ“‹ Daftar User</h3>
<div id="users"></div>
</div>

<!-- ORDERS -->
<div class="box">
<h3>ðŸ§¾ ORDER MASUK (REALTIME)</h3>
<div id="orders"></div>
</div>

<!-- LOG -->
<div class="box">
<h3>ðŸ“œ LOG VOUCHER</h3>
<div id="logs"></div>
</div>

</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyAyHSaALeuwibcF22VNL_6WDlcZepcDB3A",
 authDomain:"rhf-gamestore.firebaseapp.com",
 databaseURL:"https://rhf-gamestore-default-rtdb.asia-southeast1.firebasedatabase.app",
 projectId:"rhf-gamestore",
 storageBucket:"rhf-gamestore.firebasestorage.app",
 messagingSenderId:"52065906934",
 appId:"1:52065906934:web:c15f0eff91cc937f787cd7"
});
const db=firebase.database();

/* GLOBAL */
function sendGlobal(){
 db.ref("global").set({
  text:gtext.value,
  time:new Date().toLocaleString("id-ID")
 });
 alert("Pesan global terkirim");
}

/* ITEM */
function addItem(){
 db.ref("items").push({
  game:game.value,
  name:name.value,
  price:parseInt(price.value),
  img:img.value
 });
}
db.ref("items").on("value",s=>{
 items.innerHTML="";
 s.forEach(c=>{
  const d=c.val();
  items.innerHTML+=`
   <div class="item">
    <b>${d.game}</b> - ${d.name}<br>
    Harga: Rp ${d.price.toLocaleString("id-ID")}
   </div>`;
 });
});

/* VOUCHER */
function addVoucher(){
 db.ref("vouchers/"+vcode.value).set({
  code:vcode.value,
  disc:parseInt(vdisc.value),
  max:parseInt(vmax.value),
  used:0,
  expire:vexp.value,
  active:true
 });
}
db.ref("vouchers").on("value",s=>{
 vouchers.innerHTML="";
 s.forEach(c=>{
  const d=c.val();
  vouchers.innerHTML+=`
   <div class="item">
    <b>${d.code}</b><br>
    Diskon: ${d.disc}%<br>
    Dipakai: ${d.used}/${d.max}<br>
    Aktif: ${d.active}
   </div>`;
 });
});

/* USERS */
function addUser(){
 db.ref("users/"+user.value).set({
  user:user.value,
  pass:pass.value,
  status:"aktif",
  usedVoucher:false
 });
}
function ban(u){db.ref("users/"+u).update({status:"banned"})}
function unban(u){db.ref("users/"+u).update({status:"aktif"})}
function del(u){db.ref("users/"+u).remove()}

db.ref("users").on("value",s=>{
 users.innerHTML="";
 s.forEach(c=>{
  const d=c.val();
  users.innerHTML+=`
   <div class="item">
    <b>${d.user}</b><br>
    Pass: ${d.pass}<br>
    Status: ${d.status}<br>
    <button class="gray" onclick="ban('${c.key}')">BAN</button>
    <button class="green" onclick="unban('${c.key}')">UNBAN</button>
    <button class="red" onclick="del('${c.key}')">HAPUS</button>
   </div>`;
 });
});

/* ORDERS */
db.ref("orders").on("value",s=>{
 orders.innerHTML="";
 s.forEach(c=>{
  const d=c.val();
  orders.innerHTML+=`
   <div class="item">
    <b>KODE:</b> ${d.kode}<br>
    User: ${d.user}<br>
    Item: ${d.item}<br>
    Harga Akhir: Rp ${d.harga_akhir.toLocaleString("id-ID")}<br>
    Voucher: ${d.voucher}<br>
    Waktu: ${d.waktu}
   </div>`;
 });
});

/* LOG */
db.ref("logs").on("value",s=>{
 logs.innerHTML="";
 s.forEach(c=>{
  const d=c.val();
  logs.innerHTML+=`
   <div class="item">
    User: ${d.user}<br>
    Voucher: ${d.voucher}<br>
    Diskon: ${d.disc}%<br>
    Waktu: ${d.time}
   </div>`;
 });
});
</script>

</body>
</html>
