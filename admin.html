<!DOCTYPE html><html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel RHF FINAL</title>
<style>
body{background:#020617;color:#fff;font-family:Arial;margin:0;padding:16px}
h2,h3{margin:8px 0}
.box{border:1px solid #1e293b;border-radius:12px;padding:12px;margin-bottom:16px}
input,button,select{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:none}
button{cursor:pointer;font-weight:bold}
.green{background:#22c55e;color:#000}
.red{background:#ef4444;color:#fff}
.orange{background:#f97316;color:#000}
.item{border-bottom:1px solid #1e293b;padding:8px 0;font-size:14px}
.small{font-size:12px;color:#94a3b8}
</style>
</head>
<body><h2>ADMIN PANEL RHF (FINAL)</h2><!-- ITEM --><div class="box">
<h3>Tambah / Ubah Item</h3>
<input id="iGame" placeholder="Game">
<input id="iName" placeholder="Nama Item">
<input id="iPrice" placeholder="Harga">
<input id="iImg" placeholder="Link Gambar">
<button class="green" onclick="addItem()">Simpan Item</button>
<div id="items"></div>
</div><!-- VOUCHER --><div class="box">
<h3>Voucher</h3>
<input id="vCode" placeholder="Kode Voucher">
<input id="vDisc" placeholder="Diskon %">
<input id="vMax" placeholder="Maksimal Pemakai">
<input id="vExpire" placeholder="Expire (timestamp)">
<button class="green" onclick="addVoucher()">Buat Voucher</button>
<div id="vouchers"></div>
</div><!-- USER --><div class="box">
<h3>Buat Akun User</h3>
<input id="uUser" placeholder="Username">
<input id="uPass" placeholder="Password">
<button class="green" onclick="addUser()">Simpan Akun</button>
<div id="users"></div>
</div><!-- ORDERS --><div class="box">
<h3>Pesanan Masuk (Realtime)</h3>
<div id="orders"></div>
</div><!-- LOG VOUCHER --><div class="box">
<h3>Log Pemakaian Voucher</h3>
<div id="voucherLogs"></div>
</div><!-- FIREBASE --><script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script><script>
const firebaseConfig={apiKey:"AIzaSyAyHSaALeuwibcF22VNL_6WDlcZepcDB3A",authDomain:"rhf-gamestore.firebaseapp.com",databaseURL:"https://rhf-gamestore-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"rhf-gamestore",storageBucket:"rhf-gamestore.firebasestorage.app",messagingSenderId:"52065906934",appId:"1:52065906934:web:c15f0eff91cc937f787cd7"};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();
const itemsRef=db.ref("items");
const vouchersRef=db.ref("vouchers");
const usersRef=db.ref("users");
const ordersRef=db.ref("orders");
const voucherLogsRef=db.ref("voucher_logs");

function genCode(p){return `${p}-${Date.now()}-${Math.random().toString(36).substring(2,7).toUpperCase()}`}

/* ITEMS */
function addItem(){itemsRef.push({game:iGame.value,name:iName.value,price:Number(iPrice.value),img:iImg.value})}
itemsRef.on("value",s=>{items.innerHTML="";s.forEach(c=>{const d=c.val();items.innerHTML+=`<div class='item'>${d.game} - ${d.name} | Rp ${d.price.toLocaleString('id-ID')}</div>`})})

/* VOUCHER */
function addVoucher(){
 const code=vCode.value.toUpperCase();
 vouchersRef.orderByChild("code").equalTo(code).once("value",s=>{
  if(s.exists()) return alert("Kode sudah ada");
  vouchersRef.push({code,disc:Number(vDisc.value),max:Number(vMax.value),used:0,active:true,expire:Number(vExpire.value)||9999999999999})
 })
}
vouchersRef.on("value",s=>{vouchers.innerHTML="";s.forEach(c=>{const d=c.val();vouchers.innerHTML+=`<div class='item'>${d.code} | ${d.disc}% (${d.used}/${d.max})</div>`})})

/* USER */
function addUser(){usersRef.push({user:uUser.value,pass:uPass.value,status:"aktif",warning:0})}
usersRef.on("value",s=>{users.innerHTML="";s.forEach(c=>{const d=c.val();users.innerHTML+=`<div class='item'>ðŸ‘¤ ${d.user}<br>ðŸ”‘ ${d.pass}<br>Status: ${d.status}</div>`})})

/* ORDERS */
ordersRef.on("value",s=>{orders.innerHTML="";s.forEach(c=>{const d=c.val();orders.innerHTML+=`<div class='item'>ðŸ“¦ ${d.orderCode}<br>User: ${d.user}<br>Item: ${d.item}<br>Total: Rp ${d.hargaFinal?.toLocaleString('id-ID')||'-'}<br>Status: ${d.status}</div>`})})

/* VOUCHER LOG */
voucherLogsRef.on("value",s=>{voucherLogs.innerHTML="";s.forEach(c=>{const d=c.val();voucherLogs.innerHTML+=`<div class='item'>${d.user} | ${d.voucher} | ${new Date(d.time).toLocaleString('id-ID')}</div>`})})
</script></body>
</html>
