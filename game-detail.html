<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Detail Game â€“ RHF GAMES</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <style>
    body{background:#0f172a;color:#e5e7eb;font-family:Arial;margin:0}
    .container{max-width:900px;margin:auto;padding:16px}
    .header{display:flex;gap:16px;align-items:center}
    .header img{width:80px;height:80px;border-radius:16px}
    .card{background:#020617;border:1px solid #1e293b;border-radius:16px;padding:16px;margin-top:16px}
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px}
    .product{border:1px solid #334155;border-radius:14px;padding:12px;text-align:center;cursor:pointer}
    .product.active{border-color:#22c55e;background:#022c22}
    .inputs input{width:100%;padding:12px;border-radius:10px;border:1px solid #334155;background:#020617;color:#e5e7eb;margin-top:8px}
    button{margin-top:16px;width:100%;padding:14px;border:none;border-radius:14px;background:#22c55e;color:#000;font-size:16px;font-weight:bold;cursor:pointer}
    .price{margin-top:6px;font-weight:bold;color:#22c55e}
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <img id="gameLogo" />
    <div>
      <h1 id="gameName"></h1>
      <p id="gameCategory" style="color:#94a3b8"></p>
    </div>
  </div>  <div class="card">
    <h2>Pilih Paket</h2>
    <div class="products" id="productList"></div>
  </div>  <div class="card">
    <h2>Masukkan Data Akun</h2>
    <div class="inputs" id="accountInputs"></div>
  </div><button onclick="goCheckout()">Lanjut ke Checkout</button>

</div><script>
const params = new URLSearchParams(location.search);
const gameId = params.get('id');
const games = JSON.parse(localStorage.getItem('RHF_GAMES')||'[]');
const game = games.find(g=>g.id===gameId);
if(!game){alert('Game tidak ditemukan');location.href='index.html'}

const markup = Number(localStorage.getItem('RHF_MARKUP')||0);
let selectedProduct = null;

// SET HEADER
gameLogo.src = game.logo;
gameName.textContent = game.name;
gameCategory.textContent = game.category;

// PRODUCTS
game.products.forEach((p,i)=>{
  const d=document.createElement('div');
  d.className='product';
  d.innerHTML=`<b>${p.name}</b><div class='price'>Rp ${(p.basePrice+markup).toLocaleString()}</div>`;
  d.onclick=()=>{
    document.querySelectorAll('.product').forEach(x=>x.classList.remove('active'));
    d.classList.add('active');
    selectedProduct=p;
  };
  productList.appendChild(d);
});

// INPUT SCHEMA
const inputs = document.getElementById('accountInputs');
let schema = game.inputSchema;

function addInput(label,key,placeholder){
  const i=document.createElement('input');
  i.placeholder=placeholder;
  i.dataset.key=key;
  inputs.appendChild(i);
}

switch(schema){
  case 'id_server':
    addInput('ID','id','Masukkan User ID');
    addInput('Server','server','Masukkan Server');
    break;
  case 'id':
    addInput('ID','id','Masukkan User ID');
    break;
  case 'username':
    addInput('Username','username','Masukkan Username');
    break;
  case 'phone':
    addInput('Nomor HP','phone','08xxxxxxxx');
    break;
  case 'email':
    addInput('Email','email','email@example.com');
    break;
}

function goCheckout(){
  if(!selectedProduct)return alert('Pilih paket dulu');
  const account={};
  document.querySelectorAll('#accountInputs input').forEach(i=>{
    if(!i.value)return alert('Lengkapi data akun');
    account[i.dataset.key]=i.value;
  });
  localStorage.setItem('RHF_CHECKOUT',JSON.stringify({
    game,
    product:selectedProduct,
    account
  }));
  location.href='checkout.html';
}
  <!-- Copy struktur dari index, tapi tambah -->
<section class="detail">
  <div class="container" id="gameDetail">
    <!-- Akan diisi JS -->
  </div>
</section>

<script>
  const urlParams = new URLSearchParams(window.location.search);
  const gameId = urlParams.get('id');
  db.collection('games').doc(gameId).get().then(doc => {
    if (doc.exists) {
      const game = doc.data();
      document.getElementById('gameDetail').innerHTML = `
        <img src="${game.image}" style="width:100%; max-height:400px; object-fit:cover;">
        <h1>${game.title}</h1>
        <p>${game.desc}</p>
        <h2>${formatRupiah(game.price)}</h2>
        <button class="btn-primary" onclick="addToCart('${gameId}', ${JSON.stringify(game)})">Tambah ke Keranjang</button>
      `;
    }
  });
</script>
</script></body>
</html>
