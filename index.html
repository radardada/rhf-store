<!DOCTYPE html><html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>RHF Game Store</title><!-- STYLE SUPER KEREN --><style>
body{margin:0;background:#020617;color:#fff;font-family:Arial}
header{padding:16px;background:#020617;border-bottom:1px solid #1e293b;text-align:center}
.container{padding:16px}
.card{background:#020617;border:1px solid #1e293b;border-radius:14px;padding:14px;margin-bottom:16px;box-shadow:0 0 20px rgba(0,0,0,.4)}
img{width:100%;border-radius:12px}
button{width:100%;padding:12px;margin-top:10px;border:none;border-radius:10px;font-weight:bold;cursor:pointer}
.buy{background:#22c55e;color:#000}
.apply{background:#3b82f6;color:#fff}
input,textarea{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:none;background:#020617;color:#fff;border:1px solid #334155}
.price{font-size:18px;font-weight:bold;color:#22c55e}
.old{color:#94a3b8;text-decoration:line-through;font-size:14px}
.badge{display:inline-block;background:#eab308;color:#000;padding:4px 10px;border-radius:999px;font-size:12px}
.footer{padding:20px;text-align:center;color:#94a3b8;font-size:13px}
</style></head><body><header>
<h2>ðŸŽ® RHF GAME STORE</h2>
<small>Voucher â€¢ Diskon â€¢ Aman â€¢ Realtime</small>
</header><div class="container" id="items"></div><!-- MODAL BELI --><div id="modal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8)">
  <div class="card" style="max-width:420px;margin:40px auto">
    <h3>ðŸ§¾ Detail Pesanan</h3>
    <div id="detail"></div><input id="voucherInput" placeholder="Masukkan kode voucher">
<button class="apply" onclick="applyVoucher()">Gunakan Voucher</button>

<hr style="border:1px dashed #334155">

<textarea id="note" placeholder="Catatan tambahan"></textarea>

<button class="buy" onclick="checkout()">Kirim ke WhatsApp</button>
<button onclick="closeModal()" style="background:#334155;color:#fff">Batal</button>

  </div>
</div><div class="footer">Â© 2025 RHF Store â€¢ Sistem Aman & Anti Manipulasi</div><!-- FIREBASE --><script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script><script>
const firebaseConfig = {
  apiKey: "AIzaSyAyHSaALeuwibcF22VNL_6WDlcZepcDB3A",
  authDomain: "rhf-gamestore.firebaseapp.com",
  databaseURL: "https://rhf-gamestore-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "rhf-gamestore",
  storageBucket: "rhf-gamestore.firebasestorage.app",
  messagingSenderId: "52065906934",
  appId: "1:52065906934:web:c15f0eff91cc937f787cd7"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const itemsRef = db.ref('items');
const voucherRef = db.ref('vouchers');
const logsRef = db.ref('logs');

let selectedItem = null;
let finalPrice = 0;
let usedVoucher = null;

itemsRef.on('value', snap => {
  items.innerHTML = '';
  snap.forEach(c => {
    const d = c.val();
    items.innerHTML += `
      <div class="card">
        <img src="${d.img}">
        <h3>${d.name}</h3>
        <div class="price">Rp ${Number(d.price).toLocaleString('id-ID')}</div>
        <button class="buy" onclick='openModal(${JSON.stringify(d)})'>Beli</button>
      </div>`;
  });
});

function openModal(item){
  selectedItem = item;
  finalPrice = item.price;
  usedVoucher = null;
  detail.innerHTML = `
    <b>${item.name}</b><br>
    Harga: Rp ${Number(item.price).toLocaleString('id-ID')}
  `;
  modal.style.display='block';
}

function closeModal(){ modal.style.display='none'; }

function applyVoucher(){
  const code = voucherInput.value;
  voucherRef.child(code).once('value', s => {
    if(!s.exists()) return alert('Voucher tidak valid');
    const v = s.val();
    if(!v.active || v.used >= v.max) return alert('Voucher tidak aktif');

    usedVoucher = v;
    finalPrice = selectedItem.price - (selectedItem.price * v.disc / 100);
    detail.innerHTML += `<br><span class="badge">Diskon ${v.disc}%</span><br>Harga Akhir: Rp ${Number(finalPrice).toLocaleString('id-ID')}`;
  });
}

function checkout(){
  const code = 'RHF-' + Date.now();
  logsRef.push({
    orderCode: code,
    item: selectedItem.name,
    priceOriginal: selectedItem.price,
    priceFinal: finalPrice,
    voucher: usedVoucher ? usedVoucher.code : '-',
    discount: usedVoucher ? usedVoucher.disc : 0,
    time: new Date().toLocaleString('id-ID')
  });

  const msg = `PESANAN RHF%0A%0AKode: ${code}%0AItem: ${selectedItem.name}%0AHarga: Rp ${finalPrice.toLocaleString('id-ID')}`;
  window.open('https://wa.me/6285135993982?text='+msg);
}
</script></body>
</html>
